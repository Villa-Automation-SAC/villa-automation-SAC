<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Musica Trance – Web Player</title>

<style>
body {
    margin: 0;
    background: #0c0f12;
    font-family: Arial, sans-serif;
    color: white;
}

.header {
    background: linear-gradient(180deg, #0f1630, #0c0f12);
    padding: 40px;
    text-align: left;
    display: flex;
    align-items: center;
    gap: 30px;
}

.cover {
    width: 260px;
    height: 260px;
    border-radius: 10px;
    background-size: cover;
    background-position: center;
    background-image: url('https://i.imgur.com/s4L9z2Y.jpeg'); /* Portada tipo trance */
}

.title-block h1 {
    font-size: 55px;
    font-weight: 800;
    margin: 0;
}

.title-block p {
    opacity: 0.6;
    margin-top: 10px;
    font-size: 18px;
}

.control-area {
    padding: 40px;
    display: flex;
    gap: 20px;
    align-items: center;
}

.play-btn {
    width: 75px;
    height: 75px;
    background: #1db954;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 30px;
    cursor: pointer;
}

.play-btn:hover {
    background: #18a947;
}

.stop-btn {
    padding: 15px 30px;
    border-radius: 6px;
    background: #333;
    cursor: pointer;
}

.stop-btn:hover {
    background: #555;
}

.line {
    margin-top: 20px;
    padding: 40px;
    opacity: 0.8;
}
</style>
</head>
<body>

<!-- HEADER ESTILO SPOTIFY -->
<div class="header">
    <div class="cover"></div>

    <div class="title-block">
        <h1>Musica Trance</h1>
        <p>Estilo synthwave trance parecido a “NINA - Automatic Call”</p>
    </div>
</div>

<!-- CONTROLES -->
<div class="control-area">
    <div class="play-btn" onclick="playMusic()">▶</div>
    <div class="stop-btn" onclick="stopMusic()">Detener</div>
</div>

<div class="line">
    Reproductor Web · Generador automático de música trance · Sin archivos MP3
</div>

<script>
let audioCtx;
let isPlaying = false;
let nodes = [];

function playMusic() {
    if (isPlaying) return;
    isPlaying = true;

    audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    // BPM tipo synthwave / trance
    let bpm = 118;
    let beat = 60 / bpm;

    // PAD AMBIENTAL TIPO NINA – AUTOMATIC CALL
    let pad = audioCtx.createOscillator();
    let padGain = audioCtx.createGain();

    pad.type = "triangle";
    pad.frequency.value = 220;  // A3 suave
    padGain.gain.value = 0.25;

    pad.connect(padGain).connect(audioCtx.destination);
    pad.start();

    nodes.push(pad);

    // ARPEGIO SINTETIZADO
    setInterval(() => {
        if (!isPlaying) return;

        let arp = audioCtx.createOscillator();
        let gain = audioCtx.createGain();

        let notas = [440, 554, 659, 880]; // A, C#, E, A (acorde trance)
        let n = notas[Math.floor(Math.random() * notas.length)];

        arp.type = "sawtooth";
        arp.frequency.value = n;

        gain.gain.setValueAtTime(0.20, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.25);

        arp.connect(gain).connect(audioCtx.destination);

        arp.start();
        arp.stop(audioCtx.currentTime + 0.25);

    }, beat * 1000 * 0.5); // velocidad del arpegio


    // BAJO SINTÉTICO
    setInterval(() => {
        if (!isPlaying) return;

        let bass = audioCtx.createOscillator();
        let bassGain = audioCtx.createGain();

        bass.type = "square";
        bass.frequency.value = 55; // Bajo profundo

        bassGain.gain.setValueAtTime(0.3, audioCtx.currentTime);
        bassGain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.25);

        bass.connect(bassGain).connect(audioCtx.destination);

        bass.start();
        bass.stop(audioCtx.currentTime + 0.25);

    }, beat * 1000);


    // KICK SINTÉTICO
    setInterval(() => {
        if (!isPlaying) return;

        let kick = audioCtx.createOscillator();
        let gain = audioCtx.createGain();

        kick.type = "sine";
        kick.frequency.setValueAtTime(120, audioCtx.currentTime);
        kick.frequency.exponentialRampToValueAtTime(30, audioCtx.currentTime + 0.13);

        gain.gain.setValueAtTime(1, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.13);

        kick.connect(gain).connect(audioCtx.destination);
        kick.start();
        kick.stop(audioCtx.currentTime + 0.13);

    }, beat * 1000);
}

function stopMusic() {
    if (!isPlaying) return;

    nodes.forEach(n => n.stop());
    nodes = [];
    isPlaying = false;
}
</script>

</body>
</html>
